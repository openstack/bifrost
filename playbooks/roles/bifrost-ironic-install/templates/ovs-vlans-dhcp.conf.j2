# OVS VLAN DHCP configuration for main dnsmasq
# Generated by bifrost-ironic-install role during installation

{% for vlan in ovs_vlan_ids | default([]) %}
{% set subnet_id = 100 + vlan|int %}
# DHCP configuration for VLAN {{ vlan }} (subnet 192.168.{{ subnet_id }}.0/24)
interface={{ test_ovs_bridge_name }}.{{ vlan }}
dhcp-range=tag:{{ test_ovs_bridge_name }}.{{ vlan }},192.168.{{ subnet_id }}.10,192.168.{{ subnet_id }}.100,255.255.255.0,12h
dhcp-option=tag:{{ test_ovs_bridge_name }}.{{ vlan }},3,192.168.{{ subnet_id }}.1
dhcp-option=tag:{{ test_ovs_bridge_name }}.{{ vlan }},6,192.168.{{ subnet_id }}.1

{% endfor %}
